.\" get_nframes.3.  The get_nframes man page.
.\"
.\" (C) 2008 D. V. Wiebe
.\"
.\""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
.\"
.\" This file is part of the GetData project.
.\"
.\" This program is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.\" GetData is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
.\" General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License along
.\" with GetData; if not, write to the Free Software Foundation, Inc.,
.\" 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
.\"
.TH get_nframes 3 "11 August 2008" "Version 0.3.0" "GETDATA"
.SH NAME
get_nframes \(em report the size of a dirfile
.SH SYNOPSIS
.B #include <getdata.h>
.HP
.nh
.ad l
.BI "off_t get_nframes(DIRFILE *" dirfile );
.hy
.ad n
.SH DESCRIPTION
The
.BR get_nframes ()
function queries a dirfile(5) database specified by
.I dirfile
and returns the number of frames in the database.  Since different fields may
have differing number of frames, the Dirfile Standards (see
.BR dirfile (5))
dictate that the number of frames in the database is defined to be equal to the
number of frames in the first raw field specified in the format file.

The 
.I dirfile
parameter must point to a valid DIRFILE object previously created by a call to
.BR dirfile_open (3).

.SH RETURN VALUE
Upon successful completion,
.BR get_nframes ()
returns the number of frames in the dirfile.  On error, it
returns zero and sets
.IR dirfile -> error
to a non-zero error value.  Possible error values are:
.TP 8
.B GD_E_BAD_DIRFILE
The supplied dirfile was invalid.
.TP
.B GD_E_EMPTY
The dirfile format file defines no raw fields, or else none of the raw fields
defined could be accessed.  As a result, the database is effectively empty.
.TP
.B GD_E_RAW_IO
An attempt to
.BR stat (2)
the file associated with first raw field defined in the format failed.
.P
A descriptive error string for the last error encountered can be obtained from
a call to
.BR get_error_string (3).
.SH SEE ALSO
.BR dirfile (5),
.BR dirfile_open (3),
.BR getdata (3),
.BR get_error_string (3)
