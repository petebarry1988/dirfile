.\" get_fragmentname.3.  The get_fragmentname man page.
.\"
.\" (C) 2008 D. V. Wiebe
.\"
.\""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
.\"
.\" This file is part of the GetData project.
.\"
.\" This program is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.\" GetData is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
.\" General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License along
.\" with GetData; if not, write to the Free Software Foundation, Inc.,
.\" 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
.\"
.TH get_fragmentname 3 "8 December 2008" "Version 0.5.0" "GETDATA"
.SH NAME
get_fragmentname \(em retrieve a dirfile format file fragment name
.SH SYNOPSIS
.B #include <getdata.h>
.HP
.nh
.ad l
.BI "const char* get_fragmentname(const DIRFILE *" dirfile ", int " index );
.hy
.ad n
.SH DESCRIPTION
The
.BR get_fragmentname ()
function queries a dirfile(5) database specified by
.I dirfile
and returns the filename of the format file fragment indexed by the non-negative
.IR index .

The 
.I dirfile
argument must point to a valid DIRFILE object previously created by a call to
.BR dirfile_open (3).

The format file fragment with
.I index
equal to zero is always the primary format file for the database (the file
called 
.B format
in the root dirfile directory).  The largest valid value of
.I index
is one less than the total number of format file fragments, which may be
obtained from a call to
.BR get_nfragments (3).
.SH RETURN VALUE
Upon successful completion,
.BR get_fragmentname ()
returns a pointer to a read-only character string containing the file name of
the specified format file fragment.  On error,
.BR get_fragmentname ()
returns NULL and sets the dirfile error a non-zero error value.  Possible error
values are:
.TP 8
.B GD_E_BAD_DIRFILE
The supplied dirfile was invalid.
.TP
.B GD_E_BAD_INDEX
The supplied index was out of range.
.P
The dirfile error may be retrieved by calling
.BR get_error (3).
A descriptive error string for the last error encountered can be obtained from
a call to
.BR get_error_string (3).

.SH SEE ALSO
.BR dirfile (5),
.BR dirfile_include (3),
.BR dirfile_open (3),
.BR get_error(3).
.BR get_error_string(3),
.BR get_nfragments (3)
